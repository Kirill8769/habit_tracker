# API сервис - Трекер привычек

## Описание

Трекер привычек — это приложение, предназначенное для мониторинга и управления повседневными привычками пользователей. Цель трекера привычек — помочь пользователям прививать себе полезные привычки.

## Основные функции

- Создание и управление привычками;
- Создание приятных привычек, которые можно использовать как бонусы при выполнении полезных привычек;
- Регулирование времени напоминаний о необходимости выполнения привычкек;
- Просмотр опубликованных привычек других пользователей и возможность публиковать свои;

## Установка и запуск без использования Docker

### Склонируйте репозиторий:

```bash
git clone https://github.com/Kirill8769/habit_tracker.git
```

### Перейдите в папку с проектом

```bash
cd habit_tracker
```

### Установите зависимости:

Сначала активируем poetry
```bash
poetry shell
```

Затем установим все зависимости из pyproject.toml
```bash
poetry install
```

Для определения необходимых переменных окружения воспользуйтесь шаблоном
```bash
.env.sample
```

Сделайте миграции
```bash
python manage.py makemigrations
python manage.py migrate
```

Создайте суперпользователя
```bash
python manage.py csu
```

## Запуск программы

### Сервер сайта
Для запуска сервера сайта выполните команду:
```bash
python manage.py runserver
```

### Сервис рассылки напоминаний
Запустите redis сервер:
```bash
redis-server
```
Запустите celery worker и celery beat:
```bash
celery -A config worker --beat --scheduler django --loglevel=info
```

## Установка и запуск с использованием Docker

### Внесите изменения в переменные окружения, опираясь на описанные в docker-compose сервисы
- POSTGRES_HOST=db
- CELERY_BROKER_URL=redis://redis:6379/0
- CELERY_RESULT_BACKEND=redis://redis:6379/0
- CELERY_CACHE_BACKEND=redis://redis:6379/0

### Соберите образ
```bash
docker compose build
```

### Запустите собранный образ
```bash
docker compose up -d
```

Создайте суперпользователя
```bash
docker exec -t <id образа> python manage.py csu
```

## Лицензия

Проект распространяется под лицензией MIT.

---

Этот README файл предоставляет основную информацию о проекте, его установке и использовании.
